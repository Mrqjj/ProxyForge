import{_ as w,u as x,r as v,a as N,c as k,o as S,b as W,d as a,e as s,w as t,f as l,g as z,h as C,i as p,m as M,j as U,k as B,l as E,n as I,t as L,E as m}from"./index-C94CxHF3.js";import{l as R}from"./index--nyNv7zb.js";const q={class:"login-container"},K={class:"login-card"},T={class:"login-header"},j={class:"logo"},D={__name:"Login",setup(F){const _=C(),c=x(),n=v(null),r=v(!1),o=N({userName:"",passWord:""}),b={userName:[{required:!0,message:"请输入账号",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,message:"密码长度不能小于5位",trigger:"blur"}]},i=async()=>{n.value&&await n.value.validate(async f=>{if(f){r.value=!0;try{const e=await R(o);e.statusCode===200?(c.setToken(e.data.token),c.setUserInfo(e.data.userInfo||{}),m.success("登录成功"),_.push("/dashboard")):m.error(e.message||"登录失败")}catch(e){console.log(e),m.error(e.message||"系统异常")}finally{r.value=!1}}})};return(f,e)=>{const h=l("el-icon"),g=l("el-input"),d=l("el-form-item"),y=l("el-button"),V=l("el-form");return S(),k("div",q,[e[5]||(e[5]=W('<div class="login-bg" data-v-e0556bb6><div class="bg-gradient" data-v-e0556bb6></div><div class="bg-grid" data-v-e0556bb6></div><div class="floating-shapes" data-v-e0556bb6><div class="shape shape-1" data-v-e0556bb6></div><div class="shape shape-2" data-v-e0556bb6></div><div class="shape shape-3" data-v-e0556bb6></div></div></div>',1)),a("div",K,[a("div",T,[a("div",j,[s(h,{size:40},{default:t(()=>[s(p(M))]),_:1})]),e[2]||(e[2]=a("h1",null,"站点管理系统",-1)),e[3]||(e[3]=a("p",null,"Site Management Platform",-1))]),s(V,{ref_key:"formRef",ref:n,model:o,rules:b,class:"login-form",onSubmit:z(i,["prevent"])},{default:t(()=>[s(d,{prop:"userName"},{default:t(()=>[s(g,{modelValue:o.userName,"onUpdate:modelValue":e[0]||(e[0]=u=>o.userName=u),placeholder:"请输入账号",size:"large","prefix-icon":p(U)},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,{prop:"passWord"},{default:t(()=>[s(g,{modelValue:o.passWord,"onUpdate:modelValue":e[1]||(e[1]=u=>o.passWord=u),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":p(E),"show-password":"",onKeyup:B(i,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,null,{default:t(()=>[s(y,{type:"primary",size:"large",loading:r.value,class:"login-btn",onClick:i},{default:t(()=>[I(L(r.value?"登录中...":"登 录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[4]||(e[4]=a("div",{class:"login-footer"},[a("span",null,"© 2024 Site Management System")],-1))])])}}},G=w(D,[["__scopeId","data-v-e0556bb6"]]);export{G as default};
