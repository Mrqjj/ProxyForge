<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- ================= 控制台输出 ================= -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ================= 文件输出（滚动） ================= -->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 主日志文件 -->
        <file>./logs/project.log</file>

        <!-- 滚动策略：按日期 + 文件大小 -->
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <!-- 每天生成新文件，超过 500MB 继续编号 -->
            <fileNamePattern>logs/project.%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern>
            <!-- 单文件最大 500MB -->
            <maxFileSize>500MB</maxFileSize>
            <!-- 保留最近 7 天的日志 -->
            <maxHistory>7</maxHistory>
            <!-- 可选：日志总大小上限 -->
            <totalSizeCap>5GB</totalSizeCap>
        </rollingPolicy>

        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- ================= 日志级别 ================= -->
    <!--    <root level="INFO">-->
    <!--        <appender-ref ref="CONSOLE"/>-->
    <!--        <appender-ref ref="FILE"/>-->
    <!--    </root>-->
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </root>

    <logger name="com.vivcms" level="INFO" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </logger>


    <!-- 可单独设置某个包的日志级别 -->
    <!--    <logger name="com.example" level="DEBUG" additivity="false">-->
    <!--        <appender-ref ref="CONSOLE"/>-->
    <!--        <appender-ref ref="FILE"/>-->
    <!--    </logger>-->
</configuration>